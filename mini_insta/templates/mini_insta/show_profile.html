<!-- mini_insta/show_profile.html -->
<!-- by Amy Ho, aho@bu.edu -->

{% extends 'mini_insta/base.html' %}

{% block content %}
<body>
    <!-- Profile Info -->
    <div class="container">
        <div class="profile-header">
            <img src="{{profile.profile_image_url}}" alt="{{ profile.username }}" class="profile-avatar">

            <div class="profile-info">
                <h1 class="username">@{{ profile.username }}</h1>
                
                <div class="profile-stats">
                    <div class="stat">
                        <span class="stat-number">
                            <a href="{% url 'show_followers' profile.pk %}">  
                            {{ profile.get_num_followers }}
                            </a>
                        </span>
                        <div class="stat-label">followers</div>
                    </div>
                    <div class="stat">
                        <span class="stat-number">
                            <a href="{% url 'show_following' profile.pk %}">    
                                {{ profile.get_num_following }}
                            </a>
                        </span>
                        <div class="stat-label">following</div>
                    </div>
                </div> 
                <div class="bio-section">
                    <h4 class="display_name">{{profile.display_name}}</h4>
                    <p class="bio">{{ profile.bio_text }}</p>
                    <p class="join-date">Joined: {{ profile.join_date }}</p>
                </div>
                {% if user.is_authenticated and user == profile.user %}
                <h3>
                    <a href="{% url 'update_profile' %}">Update Profile</a>
                </h3>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Tabs Navigation -->
    <div class="profile-tabs">
        <a href="#" class="tab active">POSTS</a>
        <a href="#" class="tab">SAVED</a>
        <a href="#" class="tab">TAGGED</a>
    </div>
    
    <!-- Posts -->
    <div class="posts-grid">
        {% for post in profile.get_all_posts %}
            <div class="post">
                {% with post.get_all_photos.first as first_photo %}
                    {% if first_photo %}
                        <a href="{% url 'show_post' post.pk %}">
                            <img src="{{ first_photo.get_image_url }}" alt="Post image" class="post-image">
                        </a>
                    {% else %}
                        <a href="{% url 'show_post' post.pk %}">
                            <img src="/media/no_image.png" alt="No Image Available" width="100%">
                        </a>
                    {% endif %}
                {% endwith %}
            </div>
        {% empty %}
            <div class="no-posts">
                <h3>No Posts Yet</h3>
            </div>
        {% endfor %}
    </div>
</body>



{% endblock %}